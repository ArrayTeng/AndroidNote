![线程的生命周期](https://cdn.jsdelivr.net/gh/ArrayTeng/resources/%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png)

[面试官：说说多线程并发问题](https://www.jianshu.com/p/da2dabfce94e)

#### 多线程为什么会有并发问题，为什么多个线程对同一个变量进行操作会有并发问题？

java内存模型规定了所有变量都存储在主内存中，每条线程由自己的工作内存

线程的工作内存中保存了该线程中用到的变量的主内存副本拷贝，线程对变量的所有的操作必须在工作内存中进行，而不能直接读写主内存

线程访问一个变量，首先将变量从主内存拷贝到工作内存中，对变量的操作不会马上同步到主内存

不同的线程之间也无法直接访问对方工作内存中的变量，线程间的变量传递需要自己的工作内存和主内存之间进行数据同步

#### 并发编程的三要素

原子性：可以理解为在一个操作中，CPU不可以在中途暂停然后在调度，不可以被中断操作，要么执行完，要么就不执行。

可见性：多个线程访问同一个变量的时候，一个线程修改了这个变量的值，那么其它线程能够立即看到修改的值

有序性：程序的执行的顺序是按照代码的先后顺序执行