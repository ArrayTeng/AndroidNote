[TOC]

# 为什么Android提供Binder实现IPC

Android系统是基于Linux，Linux已经提供了管道、消息队列、共享内存和Socket等IPC机制，那为什么还要提供binder呢，主要是基于安全性、稳定性、性能这几方面考虑的。

## 性能

Socket作为一款通用接口，传输效率低，开销大，主要用在网络的进程间通信和本机上进程间的低速通信，消息队列和管道采用存储转发的方式来进行数据传递，数据先从发送方的缓存区拷贝到内核开辟的缓存区，然后在从内核缓存区拷贝到接收方缓存区，这期间至少经历了两次拷贝。共享内存虽然不需要拷贝但是控制复杂，Binder只需要一次数据拷贝，性能上仅次于共享内存。

## 稳定性

## 安全性

# Linux下传统的进程间通信原理

# Binder跨进程通信原理

## Binder IPC 实现原理

1、首先Binder驱动在内核空间创建一个数据接收缓存区；

2、接着在内核空间开辟一个内核缓存区，建立内核缓存区与数据接收缓存之间的映射关系，以及数据接收缓存区与接收进程用户空间地址之间的映射关系；

3、发送方进程通过系统调用 copyfromUser 将数据copy到内核缓存区，由于内核缓存区与接收进程用户空间存在内存映射关系，也就等于是将数据发送到了接收进程的用户空间，这样就完成了一次进程间的通信。